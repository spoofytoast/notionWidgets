<!DOCTYPE html>
<html>
	<head>
		<!-- <base target="_top"> -->
		<link rel="stylesheet" href="styles.css">
	</head>

	<body class = "centre">
		<div class="box-outline" style="background-color: #ffecf1;">
			<h2>total expenditure (€)</h2>
			<h1 id="total">hold on</h1>
		</div>
		<div class="box-outline" style="background-color: #f3e7ff;">
			<h2 style="padding-left: 14px; padding-right: 14px;">excluding rent (€)</h2>
			<h1 id="total_excl_rent">hold on</h1>
		</div>
		<div class="box-outline" style="background-color: #fffbe3;">
			<h2 style="padding-left: 29px; padding-right: 29px;">this month (€)</h2>
			<h1 id="total_this_month">hold on</h1>
		</div>

		<script type="text/javascript">
			function displayTotalValues() {
				var url = 'https://script.google.com/macros/s/AKfycbxH4Eo9tmOg6lIKG26tNgDKShDQLWdxAlYur6XhTgCKAIos7WkIgqfes8X3h3lLSEPKUg/exec?function=calculateTotals&callback=handleResponse';
				fetch(url).then(response => response.json()).then(data => {
					// console.log(data);
					console.log(data);
					total = document.getElementById("total");
					total.innerHTML = data[0];
					total_excl_rent = document.getElementById("total_excl_rent");
					total_excl_rent.innerHTML = data[1];
					total_this_month = document.getElementById("total_this_month");
					total_this_month.innerHTML = data[2];
				}).catch(err => {
					console.log("error :(")
				});
			}
			displayTotalValues();
			timer = setInterval(displayTotalValues, 86400000);
		</script>
	</body>
</html>
